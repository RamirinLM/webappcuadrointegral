{% extends 'gestionproyectos/base.html' %}
{% block gestion_content %}
<div class="container-fluid">
    <h1 class="page-title-gad mb-4">Hitos del Proyecto</h1>
    <p class="text-muted">Definición y registro de hitos (REQ-004).</p>

    <div class="table-responsive">
        <table class="table table-gad table-striped">
            <thead>
                <tr>
                    <th>Descripción</th>
                    <th>Proyecto</th>
                    <th>Fecha fin planificada</th>
                    <th>Estado</th>
                    <th>% Completado</th>
                    <th>Acción</th>
                </tr>
            </thead>
            <tbody>
                {% for h in hitos %}
                <tr>
                    <td>{{ h.descripcion|truncatewords:15 }}</td>
                    <td>{{ h.cronograma.proyecto.nombre }}</td>
                    <td>{{ h.fechaFin|date:"d/m/Y" }}</td>
                    <td><span class="badge badge-gad-azul">{{ h.get_estado_display }}</span></td>
                    <td>{{ h.porcentajeCompletado }}%</td>
                    <td><a href="{% url 'lineabase:cronograma_view' h.cronograma.slug %}" class="btn btn-sm btn-gad-primary">Ver cronograma</a></td>
                </tr>
                {% empty %}
                <tr><td colspan="6" class="text-center text-muted">No hay hitos registrados.</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock gestion_content %}
